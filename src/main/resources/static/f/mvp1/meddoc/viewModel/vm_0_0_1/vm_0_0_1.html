<h2>
	Протокол: <span ng-if="param.hid"> {{protocol.shortName}} </span>
</h2>
<div style="text-align: right;" class="w3-tiny">
	Візувальна модель {{protocol.viewModel}} | <a href=""> </a> <a
		href="/f/mvp1/meddoc/db/protocol.{{param.hid}}.json">модель даних</a>
</div>

<div ng-repeat="v1 in protocol.diagram_01" ng-init="i1=$index">
	<div ng-class="v1.class">
		<div ng-repeat="v2 in v1.childs" ng-class="v2.class"
			ng-init="i2=$index">
			<div ng-repeat="v3 in v2.childs" ng-class="v3.class"
				ng-init="i3=$index" ng-switch="protocol.process[v3.ref].type">
				<div ng-switch-when="task">
					<span class="w3-tiny"> {{taskNumer(v3.ref)}} </span>
					{{protocol.process[v3.ref].name}}
				</div>
				<div ng-switch-when="flow" class="w3-xlarge"
					title="{{taskNumer(protocol.process[v3.ref].sourceRef)}}->{{taskNumer(protocol.process[v3.ref].targetRef)}}"
					ng-switch="v3.arrow">
					<span ng-switch-when="left">⇦</span><span ng-switch-when="up">⇧</span> <span ng-switch-default>⇩</span>
					<span class="w3-tiny" ng-if="v3.targetRefNumer">
						{{taskNumer(protocol.process[v3.ref].targetRef)}} </span>
				</div>
				<div ng-repeat="v4 in v3.childs" ng-init="i4=$index"
				ng-switch="protocol.process[v4.ref].type"
				>
					<div ng-switch-when="flow" class="w3-xlarge"
						title="{{taskNumer(protocol.process[v4.ref].sourceRef)}}->{{taskNumer(protocol.process[v4.ref].targetRef)}}"
						ng-switch="v4.arrow">
						<span class="w3-tiny"
							ng-if="v4.targetRefNumer && 'left' == v4.arrow">
							{{taskNumer(protocol.process[v4.ref].targetRef)}} </span>
						<span class="w3-tiny"
							ng-if="v4.sourceRefNumer">
							{{taskNumer(protocol.process[v4.ref].sourceRef)}} </span>
						<span ng-switch-when="right">⇨</span>
						<span ng-switch-when="left">⇦</span><span ng-switch-when="up">⇧</span>
						<span ng-switch-default>⇩</span> <span class="w3-tiny"
							ng-if="v4.targetRefNumer && 'left' != v4.arrow"">
							{{taskNumer(protocol.process[v4.ref].targetRef)}} </span>
					</div>
				</div>
			</div>
			<span ng-if="!v2.childs">-{{i1}}-{{i2}}-</span>
		</div>
	</div>
	<span ng-if="!v1.childs">-{{i1}}-</span>
</div>
<hr/>
Технічна частина для розробника
<div>
{{amGenerateID}}
	<span>⇦</span> <span>⇨</span> <span>⇧</span> <span>⇩</span> | <span
		class="w3-small">⇦</span> <span class="w3-xlarge">⇨</span> <span
		class="w3-xxlarge">⇧</span> <span class="w3-xxxlarge">⇩</span>
		<span class="w3-jumbo">⇦</span>
</div>

<div ng-repeat="(k,v) in protocol.process" ng-switch="v.type">
	<div ng-switch-when="task">
		<span class="w3-tiny"> 
		{{taskNumer(k)}})
		
		{{k}}: </span> {{v.name}}
	</div>
	<div ng-switch-when="flow">{{v.sourceRef}} -> {{v.targetRef}}</div>
</div>
